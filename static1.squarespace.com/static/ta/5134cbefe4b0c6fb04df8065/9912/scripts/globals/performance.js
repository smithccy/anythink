!function e(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r=n();for(var i in r)("object"==typeof exports?exports:t)[i]=r[i]}}(this,function(){return r={},i.m=n={28:function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},59:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},620:function(e,t){e.exports=function e(t,n){var r="000000000"+t;return r.substr(r.length-n)}},650:function(e,t,n){var o=n(718),a=n(620),r=n(719),i=0,s=4,c=36,u=Math.pow(c,s);function p(){return a((r()*u<<0).toString(c),s)}function f(){return i=i<u?i:0,++i-1}function d(){var e,t,n,r,i;return"c"+(new Date).getTime().toString(c)+a(f().toString(c),s)+o()+(p()+p())}d.slug=function e(){var t=(new Date).getTime().toString(36),n=f().toString(36).slice(-4),r=o().slice(0,1)+o().slice(-1),i=p().slice(-2);return t.slice(-2)+n+r+i},d.isCuid=function e(t){return"string"==typeof t&&!!t.startsWith("c")},d.isSlug=function e(t){if("string"!=typeof t)return!1;var n=t.length;return 7<=n&&n<=10},d.fingerprint=o,e.exports=d},651:function(n,r,e){var i,o;!function(m){"use strict";var e,t;void 0!==m&&(t=(e=m).ResourceTimingCompression);var l={};function w(t,n,e){Array.prototype.forEach.call(t.ownerDocument.getElementsByTagName(e),function(e){t.href=e.currentSrc||e.src||e.getAttribute("xlink:href")||e.href,t.href.match(/^https?:\/\//)&&(n[t.href]=e)})}l.HOSTNAMES_REVERSED=!0,l.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6,image:7,beacon:8,fetch:9,iframe:"a",subdocument:"a",body:"b",input:"c",frame:"a",object:"d",video:"e",audio:"f",source:"g",track:"h",embed:"i",eventsource:"j",navigation:6},l.DEFAULT_XSS_BREAK_WORDS=[/(h)(ref)/gi,/(s)(rc)/gi,/(a)(ction)/gi],l.XSS_BREAK_DELIM="\n",l.DEFAULT_URL_LIMIT=500,l.SPECIAL_DATA_PREFIX="*",l.SPECIAL_DATA_DIMENSION_TYPE="0",l.SPECIAL_DATA_SIZE_TYPE="1",l.SPECIAL_DATA_SCRIPT_TYPE="2",l.SPECIAL_DATA_SCRIPT_ASYNC_ATTR=1,l.SPECIAL_DATA_SCRIPT_DEFER_ATTR=2,l.SPECIAL_DATA_SCRIPT_LOCAT_ATTR=4,l.SPECIAL_DATA_SERVERTIMING_TYPE="3",l.SPECIAL_DATA_LINK_ATTR_TYPE="4",l.REL_TYPES={prefetch:1,preload:2,prerender:3,stylesheet:4},l.HOSTNAME_REGEX=/^(https?:\/\/)([^\/]+)(.*)/,l.trimUrls=[],l.xssBreakWords=l.DEFAULT_XSS_BREAK_WORDS,l.noConflict=function(){return e.ResourceTimingCompression=t,l},l.convertToTrie=function(e){var t={},n,r,i,o,a,s,c,u;for(n in e)if(e.hasOwnProperty(n)){for(r=n,i=0;i<this.xssBreakWords.length;i++)r=r.replace(this.xssBreakWords[i],"$1"+l.XSS_BREAK_DELIM+"$2");for(o=e[n],a=r.split(""),c=t,i=0;i<a.length;i++)void 0===(u=c[s=a[i]])?c=c[s]=i===a.length-1?o:{}:"string"==typeof u?c=c[s]={"|":u}:i===a.length-1?c[s]["|"]=o:c=c[s]}return t},l.optimizeTrie=function(e,t){var n=0,r,i,o,a=[];for(r in e)e.hasOwnProperty(r)&&a.push(r);for(var s=0;s<a.length;s++)"object"==typeof e[r=a[s]]&&(i=this.optimizeTrie(e[r],!1))&&(delete e[r],r===l.XSS_BREAK_DELIM?(r=i.name,n++):r+=i.name,e[r]=i.value),n++;return 1===n?t?((o={})[r]=e[r],o):{name:r,value:e[r]}:!!t&&e},l.trimTiming=function(e,t){"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0);var n=Math.round(e||0),r=Math.round(t||0);return 0===n?0:n-r},l.getNavStartTime=function(e){var t=0,n;if(!e)return t;try{n=e.location&&e.location.href,"performance"in e&&e.performance&&e.performance.timing&&e.performance.timing.navigationStart&&(t=e.performance.timing.navigationStart)}catch(e){}return t},l.findPerformanceEntriesForFrame=function(e,t,n,r){var i=[],o,a,s,c,u,p,f,d,l,m={},h={},g;if(void 0===t&&(t=!0),void 0===n&&(n=0),void 0===r&&(r=0),10<r)return i;try{if(s=this.getNavStartTime(e),w(g=e.document.createElement("a"),h,"script"),w(g,m,"link"),e.frames)for(o=0;o<e.frames.length;o++)c=this.getNavStartTime(e.frames[o]),u=0,s<c&&(u=n+(c-s)),i=i.concat(this.findPerformanceEntriesForFrame(e.frames[o],!1,u,++r));try{if(d=e.location&&e.location.href,!("performance"in e&&e.performance&&e.performance.getEntriesByType))return i}catch(e){return i}t&&((a=e.performance.getEntriesByType("navigation"))&&1===a.length?(p=a[0],i.push({name:e.location.href,startTime:0,initiatorType:"html",redirectStart:p.redirectStart,redirectEnd:p.redirectEnd,fetchStart:p.fetchStart,domainLookupStart:p.domainLookupStart,domainLookupEnd:p.domainLookupEnd,connectStart:p.connectStart,secureConnectionStart:p.secureConnectionStart,connectEnd:p.connectEnd,requestStart:p.requestStart,responseStart:p.responseStart,responseEnd:p.responseEnd,serverTiming:p.serverTiming||[]})):e.performance.timing&&0!==(f=e.performance.timing).navigationStart&&f.responseEnd<=f.navigationStart+36e5&&i.push({name:e.location.href,startTime:0,initiatorType:"html",redirectStart:f.redirectStart?f.redirectStart-f.navigationStart:0,redirectEnd:f.redirectEnd?f.redirectEnd-f.navigationStart:0,fetchStart:f.fetchStart?f.fetchStart-f.navigationStart:0,domainLookupStart:f.domainLookupStart?f.domainLookupStart-f.navigationStart:0,domainLookupEnd:f.domainLookupEnd?f.domainLookupEnd-f.navigationStart:0,connectStart:f.connectStart?f.connectStart-f.navigationStart:0,secureConnectionStart:f.secureConnectionStart?f.secureConnectionStart-f.navigationStart:0,connectEnd:f.connectEnd?f.connectEnd-f.navigationStart:0,requestStart:f.requestStart?f.requestStart-f.navigationStart:0,responseStart:f.responseStart?f.responseStart-f.navigationStart:0,responseEnd:f.responseEnd?f.responseEnd-f.navigationStart:0}));var v=e.performance.getEntriesByType("resource"),y=[];for(o=0;v&&o<v.length;o++)l={name:(f=v[o]).name,initiatorType:f.initiatorType,startTime:f.startTime+n,redirectStart:f.redirectStart?f.redirectStart+n:0,redirectEnd:f.redirectEnd?f.redirectEnd+n:0,fetchStart:f.fetchStart?f.fetchStart+n:0,domainLookupStart:f.domainLookupStart?f.domainLookupStart+n:0,domainLookupEnd:f.domainLookupEnd?f.domainLookupEnd+n:0,connectStart:f.connectStart?f.connectStart+n:0,secureConnectionStart:f.secureConnectionStart?f.secureConnectionStart+n:0,connectEnd:f.connectEnd?f.connectEnd+n:0,requestStart:f.requestStart?f.requestStart+n:0,responseStart:f.responseStart?f.responseStart+n:0,responseEnd:f.responseEnd?f.responseEnd+n:0},(f.encodedBodySize||f.decodedBodySize||f.transferSize)&&(l.encodedBodySize=f.encodedBodySize,l.decodedBodySize=f.decodedBodySize,l.transferSize=f.transferSize),f.serverTiming&&f.serverTiming.length&&(l.serverTiming=f.serverTiming),this.updateScriptFlags(h,f,l),this.updateLinkFlags(m,f,l),y.push(l);i=i.concat(y)}catch(e){return i}return i},l.updateScriptFlags=function(e,t,n){if(("script"===t.initiatorType||"link"===t.initiatorType)&&e[t.name]){var r=e[t.name];for(n.scriptAttrs=(r.async?l.SPECIAL_DATA_SCRIPT_ASYNC_ATTR:0)|(r.defer?l.SPECIAL_DATA_SCRIPT_DEFER_ATTR:0);1===r.nodeType&&"BODY"!==r.nodeName;)r=r.parentNode;n.scriptAttrs|="BODY"===r.nodeName?l.SPECIAL_DATA_SCRIPT_LOCAT_ATTR:0}},l.updateLinkFlags=function(e,t,n){"link"===t.initiatorType&&e[t.name]&&e[t.name].rel.split(/[\u0009\u000A\u000C\u000D\u0020]+/).find(function(e){return e=e.toLowerCase(),!!l.REL_TYPES[e]&&(n.linkAttrs=l.REL_TYPES[e],!0)})},l.toBase36=function(e){return"number"==typeof e&&0!==e?e.toString(36):"string"==typeof e?e:""},l.getVisibleEntries=function(e){if(!e)return{};var t=["img","iframe","image"],u={},p,f,d=e.document,l=d.createElement("A");return p=void 0!==e.pageXOffset?e.pageXOffset:(d.documentElement||d.body.parentNode||d.body).scrollLeft,f=void 0!==e.pageYOffset?e.pageYOffset:(d.documentElement||d.body.parentNode||d.body).scrollTop,t.forEach(function(e){var t=d.getElementsByTagName(e),n,r,i,o;for(r=0;r<t.length;r++)if((n=t[r])&&(o=n.currentSrc||n.src||"function"==typeof n.getAttribute&&n.getAttribute("src")||n.getAttribute("xlink:href"),l.href=o,(o=l.href)&&!u[o]&&((i=n.getBoundingClientRect()).height||n.offsetHeight)&&(i.width||n.offsetWidth))){if(u[o]=[i.height||n.offsetHeight,i.width||n.offsetWidth,Math.round(i.top+f),Math.round(i.left+p)],!n.naturalHeight&&!n.naturalWidth)continue;var a,s,c;n.currentSrc&&(n.srcset||n.parentNode&&n.parentNode.nodeName&&"PICTURE"===n.parentNode.nodeName.toUpperCase())?(a=n.isConnected?n.ownerDocument.createElement("IMG"):new m.Image).src=o:a=n,s=a.naturalHeight||n.naturalHeight,c=a.naturalWidth||n.naturalWidth,!s&&!c||u[o][0]===s&&u[o][1]===c||u[o].push(s,c)}}),u},l.inArray=function(e,t){var n;if(void 0===e||void 0===t||!t.length)return!1;for(n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},l.getFilteredResourceTiming=function(e,t,n,r){var i=this.findPerformanceEntriesForFrame(e,!0,0,0),o,a,s=this.getNavStartTime(e),c={};if(!i||!i.length)return{entries:[]};var u=[];for(o=0;o<i.length;o++)if(0!==(a=i[o]).name.indexOf("about:")&&0!==a.name.indexOf("javascript:")&&!(t&&s+a.startTime<t)){if(n&&s+a.startTime>n)break;(void 0===r||"*"===r||!r.length||a.initiatorType&&this.inArray(a.initiatorType,r))&&(l.accumulateServerTimingEntries(c,a.serverTiming),u.push(a))}var p=l.compressServerTiming(c);return{entries:u,serverTiming:{lookup:p,indexed:l.indexServerTiming(p)}}},l.compressSize=function(e){var t,n,r,i;return e.encodedBodySize||e.decodedBodySize||e.transferSize?(t=e.transferSize,(i=[n=e.encodedBodySize,t?t-n:"_",(r=e.decodedBodySize)-n]).map(this.toBase36).join(",").replace(/,+$/,"")):""},l.cleanupURL=function(e,t){var n;return e&&"[object Array]"!==Object.prototype.toString.call(e)?(void 0!==t&&e&&e.length>t&&(e=-1!==(n=e.indexOf("?"))&&n<t?e.substr(0,n)+"?...":e.substr(0,t-3)+"..."),e):""},l.trimUrl=function(e,t){var n,r,i;if(e&&t)for(n=0;n<t.length;n++)if("string"==typeof(i=t[n])){if(-1!==(r=e.indexOf(i))){e=e.substr(0,r+i.length)+"...";break}}else i instanceof RegExp&&i.test(e)&&(e=e.replace(i,"$1")+"...");return this.cleanupURL(e,l.DEFAULT_URL_LIMIT)},l.getResourceTiming=function(e,t,n,r){void 0===e&&(e=m);var i=l.getFilteredResourceTiming(e,t,n),o=i.entries,a=i.serverTiming;return o&&o.length?l.compressResourceTiming(e,o,a,r):{}},l.compressResourceTiming=function(e,t,o,n){var r,i,a={},s,c,u,p,f={};for(n||(f=this.getVisibleEntries(e)),r=0;r<t.length;r++){i=t[r],void 0===(s=this.INITIATOR_TYPES[i.initiatorType])&&(s=0),p=s+[this.trimTiming(i.startTime,0),this.trimTiming(i.responseEnd,i.startTime),this.trimTiming(i.responseStart,i.startTime),this.trimTiming(i.requestStart,i.startTime),this.trimTiming(i.connectEnd,i.startTime),this.trimTiming(i.secureConnectionStart,i.startTime),this.trimTiming(i.connectStart,i.startTime),this.trimTiming(i.domainLookupEnd,i.startTime),this.trimTiming(i.domainLookupStart,i.startTime),this.trimTiming(i.redirectEnd,i.startTime),this.trimTiming(i.redirectStart,i.startTime)].map(this.toBase36).join(",").replace(/,+$/,"");var d=this.compressSize(i);""!==d&&(p+=l.SPECIAL_DATA_PREFIX+l.SPECIAL_DATA_SIZE_TYPE+d),i.hasOwnProperty("scriptAttrs")&&(p+=l.SPECIAL_DATA_PREFIX+l.SPECIAL_DATA_SCRIPT_TYPE+i.scriptAttrs),i.hasOwnProperty("linkAttrs")&&(p+=l.SPECIAL_DATA_PREFIX+l.SPECIAL_DATA_LINK_ATTR_TYPE+i.linkAttrs),i.serverTiming&&i.serverTiming.length&&(p+=l.SPECIAL_DATA_PREFIX+l.SPECIAL_DATA_SERVERTIMING_TYPE+i.serverTiming.reduce(function(e,t,n){var r=String(t.duration),i;return"0."===r.substring(0,2)&&(r=r.substring(1)),e+=(0<n?",":"")+r+l.identifyServerTimingEntry(o.indexed[t.name].index,o.indexed[t.name].descriptions[t.description])},"")),u=c=this.trimUrl(i.name,this.trimUrls),l.HOSTNAMES_REVERSED&&(u=this.reverseHostname(c)),void 0!==a[u]?a[u]+="|"+p:void 0!==f[c]?a[u]=l.SPECIAL_DATA_PREFIX+l.SPECIAL_DATA_DIMENSION_TYPE+f[c].map(this.toBase36).join(",").replace(/,+$/,"")+"|"+p:a[u]=p}return{restiming:this.optimizeTrie(this.convertToTrie(a),!0),servertiming:o.lookup}},l.reverseHostname=function(e){return e.replace(l.HOSTNAME_REGEX,function(e,t,n,r){return t+l.reverseString(n)+r})},l.reverseString=function(e){for(var t=e.length,n="";t--;)n+=e[t];return n},l.accumulateServerTimingEntries=function(n,e){(e||[]).forEach(function(e){void 0===n[e.name]&&(n[e.name]={count:0,counts:{}});var t=n[e.name];t.counts[e.description]=t.counts[e.description]||0,t.counts[e.description]++,t.count++})},l.compressServerTiming=function(r){return Object.keys(r).sort(function(e,t){return r[t].count-r[e].count}).reduce(function(e,n){var t=Object.keys(r[n].counts).sort(function(e,t){return r[n].counts[t]-r[n].counts[e]});return e.push(1===t.length&&""===t[0]?n:[n].concat(t)),e},[])},l.indexServerTiming=function(e){return e.reduce(function(e,t,n){var r,i;return i=Array.isArray(t)?(r=t[0],t.slice(1).reduce(function(e,t,n){return e[t]=n,e},{})):(r=t,{"":0}),e[r]={index:n,descriptions:i},e},{})},l.identifyServerTimingEntry=function(e,t){var n="";return e&&(n+=e),t&&(n+="."+t),n.length&&(n=":"+n),n},void 0===(o=function(){return l}.apply(r,i=[]))||(n.exports=o)}("undefined"!=typeof window?window:void 0)},652:function(O,A,e){(function(E){var S,b;!function(){var t="undefined"!=typeof window&&window===this?this:void 0!==E&&null!=E?E:this,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function r(){r=function(){},t.Symbol||(t.Symbol=e)}var i=0;function e(e){return"jscomp_symbol_"+(e||"")+i++}function o(){r();var e=t.Symbol.iterator;e=e||(t.Symbol.iterator=t.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&n(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return a(this)}}),o=function(){}}function a(e){var t=0;return s(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function s(e){return o(),(e={next:e})[t.Symbol.iterator]=function(){return this},e}function c(e){o();var t=e[Symbol.iterator];return t?t.call(e):a(e)}function u(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var p=0;function f(i,o){var a=XMLHttpRequest.prototype.send,s=p++;XMLHttpRequest.prototype.send=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];var r=this;return i(s),this.addEventListener("readystatechange",function(){4===r.readyState&&o(s)}),a.apply(this,t)}}function d(o,a){var s=fetch;fetch=function(e){for(var i=[],t=0;t<arguments.length;++t)i[t-0]=arguments[t];return new Promise(function(t,n){var r=p++;o(r),s.apply(null,[].concat(u(i))).then(function(e){a(r),t(e)},function(e){a(e),n(e)})})}}var l="img script iframe link audio video source".split(" ");function m(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||m(n.children,t))return!0;return!1}function h(n){var e=new MutationObserver(function(e){for(var t=(e=c(e)).next();!t.done;t=e.next())"childList"==(t=t.value).type&&m(t.addedNodes,l)?n(t):"attributes"==t.type&&l.includes(t.target.tagName.toLowerCase())&&n(t)});return e.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),e}function g(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=c(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=c(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch(r=n[t],r.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function v(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var t=window.__tti&&window.__tti.o;this.a=e?e.map(function(e){return{start:e.startTime,end:e.startTime+e.duration}}):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,f(this.m.bind(this),this.l.bind(this)),d(this.m.bind(this),this.l.bind(this)),T(this),this.w&&(this.h=h(this.B.bind(this)))}function y(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=g(e.g,e.b);w(e,Math.max(n+5e3,t))}function w(o,e){!o.i||o.v>e||(clearTimeout(o.j),o.j=setTimeout(function(){var e=performance.timing.navigationStart,t=g(o.g,o.b),e=(window.a&&window.a.A?1e3*window.a.A().C-e:0)||performance.timing.domContentLoadedEventEnd-e;if(o.u)var n=o.u;else n=performance.timing.domContentLoadedEventEnd?(n=performance.timing).domContentLoadedEventEnd-n.navigationStart:null;var r=performance.now();null===n&&w(o,Math.max(t+5e3,r+1e3));var i=o.a;(t=r-t<5e3?null:r-(t=i.length?i[i.length-1].end:e)<5e3?null:Math.max(t,n))&&(o.s(t),clearTimeout(o.j),o.i=!1,o.c&&o.c.disconnect(),o.h&&o.h.disconnect()),w(o,performance.now()+1e3)},e-performance.now()),o.v=e)}function T(r){r.c=new PerformanceObserver(function(e){for(var t=(e=c(e.getEntries())).next();!t.done;t=e.next())if("resource"===(t=t.value).entryType&&(r.b.push({start:t.fetchStart,end:t.responseEnd}),w(r,g(r.g,r.b)+5e3)),"longtask"===t.entryType){var n=t.startTime+t.duration;r.a.push({start:t.startTime,end:n}),w(r,n+5e3)}}),r.c.observe({entryTypes:["longtask","resource"]})}v.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new Promise(function(e){t.s=e,"complete"==document.readyState?y(t):window.addEventListener("load",function(){y(t)})})},v.prototype.m=function(e){this.f.set(e,performance.now())},v.prototype.l=function(e){this.f.delete(e)},v.prototype.B=function(){w(this,performance.now()+5e3)},t.Object.defineProperties(v.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(u(this.f.values()))}}});var _={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new v(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};O.exports?O.exports=_:void 0===(b=function(){return _}.apply(A,S=[]))||(O.exports=b)}()}).call(this,e(59))},718:function(e,t,n){var r=n(620),i="object"==typeof window?window:self,o=Object.keys(i).length,a,s=r(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+o.toString(36),4);e.exports=function e(){return s}},719:function(e,t){var n,r=window.crypto||window.msCrypto;if(r){var i=Math.pow(2,32)-1;n=function(){return Math.abs(r.getRandomValues(new Uint32Array(1))[0]/i)}}else n=Math.random;e.exports=n},720:function(e){e.exports={name:"@sqs/rum-collector",version:"1.5.1",description:"Gather RUM metrics and beacon to the wp-rum microservice",main:"lib/rum-collector.bundle.js",module:"lib/index.js",types:"lib/index.d.ts",files:["lib","timing.js"],scripts:{test:"jest","test:watch":"jest --watch",build:"npm run lint:fix && npm run build:bundle && npm run build:module","build:bundle":"NODE_ENV=production webpack","build:module":"NODE_ENV=production tsc -p tsconfig.module.json","build:profile":"NODE_ENV=production webpack --profile --json","type-check":"tsc --noEmit",dev:"NODE_ENV=development webpack-dev-server","create-plugin":"hygen plugin new --name",lint:"tslint src/**/*.ts src/*.ts","lint:fix":"tslint --fix src/**/*.ts src/*.ts",prepare:"npm run build",prepublishOnly:"npm run lint && npm run test"},repository:{type:"git",url:"https://git@code.squarespace.net/scm/perf/rum-collector.git"},homepage:"http://goto/wp/repos/rum-collector",bugs:{url:"http://goto/wp/issues",email:"web-performance-all@squarespace.com"},keywords:["rum","performance","beacon","perf","pirates","metrics","squarespace","sqs"],license:"LicenseRef-LICENSE",publishConfig:{registry:"https://npm.squarespace.net:8443"},engines:{node:"10.*"},devDependencies:{"@types/camelcase":"^4.1.0","@types/jest":"^22.1.2","@types/lodash.once":"^4.1.3","@types/node":"^10.9.3","@types/uuid":"^3.4.3","clean-webpack-plugin":"0.1.19","core-js":"^3.0.1","css-loader":"1.0.0","html-webpack-plugin":"3.2.0",husky:"^2.3.0",hygen:"^1.6.2",jest:"^23","lint-staged":"^8.1.7",moment:"^2.22.2",prettier:"^1",rimraf:"2.6.2","style-loader":"^0.23.0","ts-jest":"^23","ts-loader":"^4.5.0",tslint:"^5.11.0","tslint-config-prettier":"^1.15.0","tslint-eslint-rules":"^5.4.0","tslint-plugin-prettier":"^1.3.0",typescript:"^3",webpack:"^4.17.1","webpack-cli":"^3","webpack-dev-server":"^3.1.7","webpack-merge":"^4.1.4"},dependencies:{"@sqs/praetor":"^0.4.3",cuid:"^2.1.4","resourcetiming-compression":"^1.2.4","tti-polyfill":"^0.2.2"},jest:{transform:{"^.+\\.(j|t)sx?$":"ts-jest"},testMatch:["**/__tests__/*.test.(t|j)s"],moduleFileExtensions:["ts","tsx","js","jsx","json","node"],globals:{"ts-jest":{tsConfigFile:"tsconfig.development.json"}}},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{js,ts}":["prettier --write","git add"]},_resolved:"https://npm.squarespace.net:8443/@/@sqs/rum-collector/_attachments/rum-collector-1.5.1.tgz",_integrity:"sha512-29EC5YLCXXa60RZopmZGUuR8SBVyq4SiHCHpF6yOsc7NuXTtef9SnBekSz7vskPIJTV0QjHVINL/JT8PS7j+1A==",_from:"@sqs/rum-collector@1.5.1"}},950:function(e,t,n){"use strict";n.r(t);var r=n(28),i=n.n(r),o="true",a="default",s,c;(c=s=s||{}).FEATURE_TOGGLE="FEATURE_TOGGLE",c.AB_TEST="AB_TEST";var u=(f.prototype.isValid=function(){return this.isConfigurationLoaded},f.prototype.getContext=function(e){return this.experiments[e]},f),p;function f(e){var t=this;this.experiments={},this.isConfigurationLoaded=Boolean(e.isConfigurationLoaded),Array.isArray(e.experimentContextList)&&e.experimentContextList.forEach(function(e){null!==e&&"object"==typeof e&&e.hasOwnProperty("name")&&(t.experiments[e.name]=e)})}function d(e){this.configuration=new u(e)}var l=(d.prototype.getFeatureToggle=function(e,t){var n=this.getContextValidity(e,s.FEATURE_TOGGLE),r=n.context,i=n.error;return i||null===r?{enabled:t,error:i}:r.containsError?{enabled:this.isFeatureToggleEnabled(r),error:"The specified feature has an invalid server-side definition"}:{enabled:this.isFeatureToggleEnabled(r)}},d.prototype.getABTestVariant=function(e,t){var n=this.getContextValidity(e,s.AB_TEST),r=n.context,i=n.error;return i||null===r?{error:i,segment:a,variant:t}:r.containsError?{error:"The specified feature has an invalid server-side definition",segment:r.segmentName,variant:r.variant}:{segment:r.segmentName,variant:r.variant}},d.prototype.getAllExperiments=function(){return this.configuration},d.prototype.getContextValidity=function(e,t){if(!this.configuration.isValid())return{context:null,error:"The underlying Praetor configuration is not loaded"};var n=this.configuration.getContext(e);return void 0===n?{context:null,error:"The specified feature does not exist"}:n.experimentType!==t?{context:null,error:"The specified feature is not a "+t}:{context:n}},d.prototype.isFeatureToggleEnabled=function(e){return e.variant===o},d),m=n(650),g=n.n(m),v="/api/1/performance",h="/records",y="/settings",w="/error",T=function(e){return{app:"a",data:{__encoding_config__:e,__encoding_key__:"d"},event:"e",pageLoadId:"pl",ts:"t"}},_,E,S,b={abTest:"ab",connection:{__encoding_config__:{downlink:"do",effectiveType:"ef",rtt:"rtt",saveData:"sd"},__encoding_key__:"con"},context:"ctx",deliveryType:"dt",display:{__encoding_config__:{devicePixelRatio:"dpr",screenHeight:"sh",screenWidth:"sw",viewportHeight:"vh",viewportWidth:"vw"},__encoding_key__:"disp"},hardware:{__encoding_config__:{deviceMemory:"dm",hardwareConcurrency:"hc"},__encoding_key__:"hdw"},hash:"h",hostname:"hn",mid:"mid",pathname:"p",version:"v"},O={delay:"d",eventType:"et"},A={eventTime:"t",eventType:"et"},P={connectEnd:"ce",connectStart:"c",decodedBodySize:"db",domComplete:"dc",domContentLoadedEventEnd:"de",domContentLoadedEventStart:"ds",domInteractive:"di",domLoading:"d",domainLookupEnd:"dle",domainLookupStart:"dl",encodedBodySize:"eb",fetchStart:"f",loadEventEnd:"le",loadEventStart:"l",navigationStart:"n",navigationType:"nt",nextHopProtocol:"nh",redirectCount:"rc",redirectEnd:"rde",redirectStart:"rd",requestStart:"r",responseEnd:"re",responseStart:"rs",secureConnectionStart:"s",supportLevel:"sl",transferSize:"t",unloadEventEnd:"ue",unloadEventStart:"u",visibilityStateOnDCL:"v"},C={duration:"d",endMarkDetail:"e",measureDetail:"m",name:"n",startMarkDetail:"s",startTime:"st"},L={tti:"t"},k={firstContentfulPaint:"fcp",firstPaint:"fp"},I={info:{__encoding_config__:{img:{__encoding_config__:{__encoding_config__:{assetUrl:"a",naturalHeight:"nh",naturalWidth:"nw",parentHeight:"ph",parentWidth:"pw",squarespaceSize:"s",visibleInSession:"vs",visibleOnLoad:"vl"},__encoding_skip__:!0},__encoding_key__:"img"}},__encoding_key__:"i"},timings:"t"},x=Object.keys(O),j=Object.keys(A),D=Object.keys(b),R=Object.keys(P),N=Object.keys(C),B=Object.keys(k),M=Object.keys(L),q=Object.keys(I),F="userTiming",z=["click","mousedown","keydown","touchstart","pointerdown"],H,U="load",V="sqsImageLoad",X=["DOMContentLoaded",U],Y="beforeunload",W,G=["first-paint","first-contentful-paint"],J=[V,Y,U,"resourcetimingbufferfull"],Z=[U,Y],K="ss_ab",$="SS_MID",Q=2e3,ee=3e4,te=5e4,ne;function re(e){return"number"==typeof e?Math.round(e):e}function ie(){return!!(window.performance&&window.performance.now&&window.addEventListener)}function oe(){return!!(window.PerformanceMeasure&&window.PerformanceMark&&window.performance&&window.performance.mark&&window.performance.measure)}function ae(e,t,n){throw"object"==typeof e&&"name"in e&&(e.name="RUMError["+t+"]"),"object"==typeof e&&"message"in e&&(e.message+=": "+JSON.stringify(n)),e}function se(f,d){var l={};return Object.keys(d).forEach(function(e){var t=d[e],n,r,i=f[e]||f,o=typeof i,a="string"==o,s;if(a||("object"==o||"undefined"===i)){if(a)n=i,r=Number.isInteger(t)?t.toString(36):t;else{var c=i.__encoding_skip__,u=i.__encoding_config__,p=i.__encoding_fn__;if(!c&&!u&&!f)return void ae(new Error("Invalid encoding map"),"encodeData",{encodeConfig:f,performanceData:d});n=c?e:i.__encoding_key__,r=u?se(u,t):p?p(t):t}n&&(l[""+n]=r)}}),l}Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var ce=[];function ue(e,t){try{var n;if(pe())if(navigator.sendBeacon(e,t))return;var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),r.send(t)}catch(e){}}function pe(){return"function"==typeof navigator.sendBeacon}function fe(t){Z.forEach(function(e){window.addEventListener(e,function(){e===U?ne=window.setTimeout(le,ee,t):"number"==typeof ne&&(window.clearTimeout(ne),ne=void 0),le(t)})})}function de(e){ce.push(e)}function le(e){if(ce.length){for(var t=[];ce.length;){var n=ce.pop(),r=JSON.stringify(n);r.length<=te&&n?t.push(n):me(e,"Omitting individual metric because it's over the PER_METRIC_DELIVERY_SIZE (metric is "+r.length+" bytes, delivered from "+window.location.href+")")}if(t.length){var i=JSON.stringify(t);ue(e+h,i)}}}function me(e,t){ue(e+w,t)}function he(e,t){var n=se(e,t);if(!n)throw new Error("Data is empty");de(n)}var ge=[],ve;function ye(){return ge}function we(e){ge.push(e)}function Te(e,t,n,r){var i=Object.freeze({app:e,data:r,event:t,pageLoadId:n,ts:Date.now()});return we(i),i}function _e(){this.requiresContext=!1,this.context={},this.deliveryBuffer=[],this.entryType=_e.eventName,this.fireOnce=!1,this.gatherEvents=[],this.supportType="PerformanceObserver"in window?"observe":"gather",this.encodeConfig=T({}),this.appName="",this.pageLoadId=""}var Ee=(_e.prototype.getDeliveryBuffer=function(){return this.deliveryBuffer},_e.prototype.getEventName=function(){return this.constructor.eventName},_e.prototype.getEntryType=function(){return this.entryType},_e.prototype.getGatherEvents=function(){return this.gatherEvents},_e.prototype.getSupportType=function(){return this.supportType},_e.prototype.shouldFireOnce=function(){return this.fireOnce},_e.prototype.observerParse=function(e){return this.deliveryBuffer.push(e),!0},_e.prototype.gather=function(e){return e},_e.prototype.gatherParse=function(e){return this.deliveryBuffer.push(e),!0},_e.prototype.deliver=function(){for(;this.deliveryBuffer.length;){var e=this.deliveryBuffer.shift();if(e){var t=Te(this.appName,this.getEventName(),this.pageLoadId,e);he(this.getEncodeConfig(),t)}}this.deliveryBuffer=[]},_e.prototype.getEncodeConfig=function(){return this.encodeConfig},_e.prototype.setApp=function(e){return this.appName=e,this},_e.prototype.setId=function(e){return this.pageLoadId=e,this},_e.eventName="",_e),Se,be,Oe,Ae;function Pe(){var e=Ae.call(this)||this;return e.gatherEvents=z,e.fireOnce=!0,e.encodeConfig=T(O),ie()?e.supportType="gather":e.supportType="",e}var Ce=((be=function(e,t){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}be(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Pe,Ae=Ee),Pe.prototype.gather=function(e){var t=e.timeStamp,n=1e12<t?+new Date:window.performance.now(),r,i;return{delay:Math.max(n-t,0),eventType:e.type}},Pe.prototype.gatherParse=function(n){return this.deliveryBuffer.push(x.reduce(function(e,t){return t in n&&(e[t]=re(n[t])),e},{})),!0},Pe.eventName="firstInputDelay",Pe),Le,ke,Ie,xe;function je(){var e=xe.call(this)||this;return e.gatherEvents=z,e.fireOnce=!0,e.encodeConfig=T(A),ie()?e.supportType="gather":e.supportType="",e}var De=((ke=function(e,t){return(ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ke(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(je,xe=Ee),je.prototype.gather=function(e){var t,n;return{eventTime:window.performance.now(),eventType:e.type}},je.prototype.gatherParse=function(n){return this.deliveryBuffer.push(j.reduce(function(e,t){return t in n&&(e[t]=re(n[t])),e},{})),!0},je.eventName="firstInteraction",je),Re,Ne,Be,Me;function qe(e){var t={};for(var n in e)n in e&&(t[n]=e[n]);return t}function Fe(){var e,t=Me.call(this)||this;t.entryType="navigation",t.gatherEvents=[U],t.encodeConfig=T(P),t.supportLevel=-1,t.visibilityStateOnDCL="",e=t.getNavigationLevel(),t.supportType=e[0],t.supportLevel=e[1];var n=function(){t.visibilityStateOnDCL=document.visibilityState||""};return window.addEventListener("DOMContentLoaded",n,{once:!0}),t}var ze=((Ne=function(e,t){return(Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ne(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Fe,Me=Ee),Fe.prototype.observerParse=function(e){return this.parse(e)},Fe.prototype.gather=function(){var e;return qe(e=1===this.supportLevel?window.performance.timing:window.performance.getEntriesByType("navigation")[0])},Fe.prototype.gatherParse=function(e){return this.parse(e)},Fe.prototype.parse=function(n){"navigation"in performance&&(n.navigationType=window.performance.navigation.type,n.redirectCount=window.performance.navigation.redirectCount),n.supportLevel=this.supportLevel;var e=R.reduce(function(e,t){return t in n&&("number"==typeof n[t]&&"navigationStart"!==t&&n[t]>=n.navigationStart?e[t]=re(n[t]-n.navigationStart):e[t]=re(n[t])),e},{});return e.visibilityStateOnDCL=this.visibilityStateOnDCL,this.deliveryBuffer.push(e),!0},Fe.prototype.getNavigationLevel=function(){if(window.performance){if(window.performance.getEntriesByType&&void 0!==window.PerformanceNavigationTiming&&window.performance.getEntriesByType(this.entryType)[0]instanceof PerformanceNavigationTiming)return[this.supportType,2];if(window.performance.timing)return["gather",1]}return["",-1]},Fe.eventName="navigation",Fe);function He(e){var t=new RegExp("(^| )"+e+"=([^;]+)"),n=document.cookie.match(t);return n?n[2]:""}function Ue(e){return window.localStorage&&window.localStorage.getItem?window.localStorage.getItem(e):null}var Ve=(Xe=function(e,t){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Xe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Xe,Ye=n(720),We,Ge,Je,Ze;function Ke(){if(!window.atob)return null;var e=Ue(K);if(e)try{return JSON.parse(window.atob(e))}catch(e){return null}return null}function $e(){var e={},t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(t){var n=(1e3*t.downlink).toString();e={downlink:parseInt(n,10),effectiveType:t.effectiveType,rtt:t.rtt,saveData:t.saveData}}return e}function Qe(){var e=window.devicePixelRatio,t=window.screen,n=t.width,r=t.height,i=document.documentElement,o,a,s;return{devicePixelRatio:e,screenHeight:r,screenWidth:n,viewportHeight:i.clientHeight,viewportWidth:i.clientWidth}}function et(){return{deviceMemory:navigator.deviceMemory,hardwareConcurrency:navigator.hardwareConcurrency}}function tt(){var e=null!==Ze&&Ze.apply(this,arguments)||this;return e.requiresContext=!0,e.gatherEvents=[U],e.supportType="gather",e.encodeConfig=T(b),e}(Ge=We=We||{}).Beacon="beacon",Ge.XHR="xhr";var nt=(Ve(tt,Ze=Ee),tt.prototype.gather=function(){var e=$e(),t=Qe(),n=et();return{abTest:Ke(),connection:e,context:this.context,deliveryType:pe()?We.Beacon:We.XHR,display:t,hardware:n,hash:window.location.hash||"",hostname:window.location.hostname||"",mid:He($),pathname:window.location.pathname||"/",version:Ye.version}},tt.prototype.gatherParse=function(n){return this.deliveryBuffer.push(D.reduce(function(e,t){return t in n&&(e[t]=n[t]),e},{})),!0},tt.eventName="pageLoad",tt),rt,it,ot,at;function st(){var e=null!==at&&at.apply(this,arguments)||this;return e.entryType="paint",e.supportType="observe",e.encodeConfig=T(k),e.paintsRetrieved=[],e}var ct=((it=function(e,t){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}it(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(st,at=Ee),st.prototype.observerParse=function(n){var e=n.name,t=n.startTime;if(G.indexOf(e)<0)return!1;this.paintsRetrieved.push(e),0===this.deliveryBuffer.length&&this.deliveryBuffer.push(B.reduce(function(e,t){return t in n&&(e[t]=n[t]),e},{}));var r=e.replace(/-([a-zA-Z])/g,function(e,t){var n;return t&&t.toUpperCase()||e});return this.deliveryBuffer[0][r]=re(t),!(this.paintsRetrieved.length<G.length)},st.eventName="paint",st),ut=n(651),pt=n.n(ut),ft=(dt=function(e,t){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}dt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dt,lt=function(){return(lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},mt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n},ht,gt;function vt(){var e=gt.call(this)||this;return e.entryType="resource",e.gatherEvents=J,e.encodeConfig=T(I),e.readyToDeliver=!1,e.dataBuffer={info:{},timings:{}},e.resourceTimingData=[],window.performance&&window.performance.getEntriesByType&&window.performance.clearResourceTimings&&window.PerformanceResourceTiming&&window.performance.getEntriesByType(e.entryType)[0]instanceof PerformanceResourceTiming?e.supportType="gather":e.supportType="",e.initImageLoaderData(),e}var yt=(ft(vt,gt=Ee),vt.prototype.gather=function(e){if(e.type!==V)return e.type===Y&&(this.readyToDeliver=!0),this.resourceTimingData=this.resourceTimingData.concat(this.gatherImageTimingData()),this.dataBuffer;var t=e.detail.imageData,n=void 0===t?{}:t;return Object.assign(this.dataBuffer.info.img,this.gatherImageInfo(n)),this.dataBuffer},vt.prototype.gatherParse=function(e){if(this.readyToDeliver){var t=pt.a.compressResourceTiming(window,this.resourceTimingData,[],!1).restiming;this.dataBuffer.timings=t,this.deliveryBuffer=[this.dataBuffer]}return this.readyToDeliver},vt.prototype.initImageLoaderData=function(){var t=this;if(this.dataBuffer.info.img={},window.ImageLoader&&window.ImageLoader.imageInfo&&Object.keys(window.ImageLoader.imageInfo).length){var n=window.ImageLoader.imageInfo;Object.keys(n).forEach(function(e){Object.assign(t.dataBuffer.info.img,t.gatherImageInfo(n[e],!0))})}},vt.prototype.isSquarespaceImage=function(e){var t=e.name,n=e.initiatorType,r=document.createElement("a");r.href=t;var i=r.hostname,o=r.pathname;return"img"===n&&(-1<i.indexOf("images.squarespace-cdn.com")||(i.indexOf("squarespace.com")||-1<i.indexOf("sqsp.net")||-1<i.indexOf("squarespace.net"))&&-1<o.indexOf("static"))},vt.prototype.gatherImageTimingData=function(){var e=window.performance.getEntriesByType("resource").filter(this.isSquarespaceImage);return window.performance.clearResourceTimings(),e},vt.prototype.gatherImageInfo=function(e,t){var n;void 0===t&&(t=!1);var r=e.naturalDimensions,i=void 0===r?{}:r,o=e.parentElementDimensions,a=void 0===o?{}:o,s=e.isVisible,c=void 0!==s&&s,u=e.assetUrl,p=e.squarespaceSize,f=mt(e,["naturalDimensions","parentElementDimensions","isVisible","assetUrl","squarespaceSize"]);if(!u||!p)return{};var d=u+"?format="+e.squarespaceSize,l=lt({assetUrl:d,squarespaceSize:p},f);return i.hasOwnProperty("height")&&i.hasOwnProperty("width")&&(l.naturalHeight=Math.round(i.height),l.naturalWidth=Math.round(i.width)),a.hasOwnProperty("height")&&a.hasOwnProperty("width")&&(l.parentHeight=Math.round(a.height),l.parentWidth=Math.round(a.width)),l.visibleInSession=c,l.visibleOnLoad=t&&c,(n={})[d]=l,n},vt.eventName="resource",vt),wt=n(652),Tt,_t,Et,St;function bt(){var t=St.call(this)||this;return t.entryType="longtask",t.supportType="observe",t.encodeConfig=T(L),t.fireOnce=!0,window.PerformanceLongTaskTiming&&window.PerformanceObserver?(window.__tti={e:[]},Object(wt.getFirstConsistentlyInteractive)().then(function(e){t.parse({tti:e}),t.deliver()})):t.supportType="",t}var Ot=((_t=function(e,t){return(_t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}_t(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(bt,St=Ee),bt.prototype.observerParse=function(e){return window.__tti&&(window.__tti.e=window.__tti.e.concat(e)),!1},bt.prototype.parse=function(n){this.deliveryBuffer.push(M.reduce(function(e,t){return t in n&&(e[t]=re(n[t])),e},{}))},bt.eventName="tti",bt);function At(e){return"string"==typeof e&&e.substring&&"rum-"===e.substring(0,4)}var Pt=(Ct=function(e,t){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ct(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ct,Lt=function(){return(Lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},kt,It;function xt(){var e=It.call(this)||this;return e.entryType="measure",e.gatherEvents=[F],e.encodeConfig=T(C),oe()||(e.supportType=""),e}var jt=(Pt(xt,It=Ee),xt.addDetail=function(e,t){xt.detailCache[e]=Dt(t)},xt.addMeasure=function(e,t,n){xt.measureMarkCache[e]={startMarkName:t,endMarkName:n}},xt.prototype.observerParse=function(e){return this.parse(Lt({},e,this.getDetails(e.name)))},xt.prototype.gather=function(){var t=this,e;return{userTimingMeasures:window.performance.getEntriesByType("measure").filter(function(e){return At(e.name)}).map(function(e){return window.performance.clearMeasures(e.name),qe(Lt({},e,t.getDetails(e.name)))})}},xt.prototype.gatherParse=function(e){var t=this,n;return e.userTimingMeasures.forEach(function(e){t.parse(e)}),!0},xt.prototype.parse=function(e){if(!At(e.name))return!1;for(var t={},n=0,r=N;n<r.length;n++){var i=r[n];i in e&&(t[i]=re(e[i]))}return this.deliveryBuffer.push(t),!0},xt.prototype.getDetails=function(e){var t={},n=xt.measureMarkCache[e];return void 0!==n&&(delete xt.measureMarkCache[e],void 0!==n.startMarkName&&n.startMarkName in xt.detailCache&&(t.startMarkDetail=xt.detailCache[n.startMarkName]),void 0!==n.endMarkName&&n.endMarkName in xt.detailCache&&(t.endMarkDetail=xt.detailCache[n.endMarkName])),e in xt.detailCache&&(t.measureDetail=xt.detailCache[e],delete xt.detailCache[e]),t},xt.eventName="user",xt.detailCache={},xt.measureMarkCache={},xt);function Dt(e){if("object"!=typeof e||null===e)return e;var t={};for(var n in e)n in e&&(t[n]=e[n]);return t}var Rt=[Ce,De,ze,nt,ct,Ot,jt,yt];function Nt(e,t){var n={passive:!0,capture:!0};function r(){t(e),o()}function i(){o()}function o(){window.removeEventListener("pointerup",r,n),window.removeEventListener("pointercancel",i,n)}window.addEventListener("pointerup",r,n),window.addEventListener("pointercancel",i,n)}var Bt=function(o,a,s,c){return new(s=s||Promise)(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(o,a||[])).next())})},Mt=function(e,n){var r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i,o,a,t;return t={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return c([t,e])}}function c(t){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return r.label++,{value:t[1],done:!1};case 5:r.label++,o=t[1],t=[0];continue;case 7:t=r.ops.pop(),r.trys.pop();continue;default:if(!(a=0<(a=r.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){r=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){r.label=t[1];break}if(6===t[0]&&r.label<a[1]){r.label=a[1],a=t;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(t);break}a[2]&&r.ops.pop(),r.trys.pop();continue}t=n.call(e,r)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};function qt(e){return e+"-observer"}var Ft=[],zt,Ht=2e3;function Ut(e){Ft.push(e),zt=zt||window.requestIdleCallback(Vt,{timeout:Ht})}function Vt(e){for(;(0<e.timeRemaining()||e.didTimeout)&&Ft.length;){var t=Ft.shift();t&&t.deliver()}zt=Ft.length?window.requestIdleCallback(Vt,{timeout:Ht}):void 0}function Xt(e,t){void 0===t&&(t=!1),window.requestIdleCallback&&!t?Ut(e):e.deliver()}function Yt(t){return Bt(this,void 0,void 0,function(){return Mt(this,function(e){return[2,new Promise(function(n,r){if(t){var e=new l(t);n(e)}else{var i=new XMLHttpRequest;i.timeout=Q,i.onreadystatechange=function(e){if(4===i.readyState)if(200===i.status){var t=new l(JSON.parse(i.response));n(t)}else r(i.status)},i.ontimeout=function(){r("Metric settings request timeout")},i.open("GET",""+(v+y),!0),i.send()}})]})})}function Wt(){return"complete"===document.readyState}function Gt(e,t,n){var r,i,o;return void 0===n&&(n=!1),!!e.getFeatureToggle(t,n).enabled&&"true"===e.getABTestVariant(t+"-rollout",n.toString()).variant}function Jt(h){return Bt(this,void 0,void 0,function(){var i,o,t,a,n,r,s,c,u,f,p,d,l,m;return Mt(this,function(e){switch(e.label){case 0:if(i=h.appName||"",o=h.context||{},t=h.praetorSubjectVariant,a=g()(),n=h.enabled,!(r=void 0===n||n))return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Yt(t)];case 2:return s=e.sent(),[3,4];case 3:return c=e.sent(),[2];case 4:if(!Gt(s,"rum")||!Gt(s,i+"-app"))return[2];if(u=Rt.reduce(function(e,t){var n;if(Gt(s,t.eventName+"-plugin")){var r=(new t).setApp(i).setId(a);r.requiresContext&&(r.context=o),e.push(r)}return e},[]),f=[],u.forEach(function(o){var e=o.getSupportType();if("observe"===e){var t=o.getEntryType(),a=qt(t);f.push(t),window.addEventListener(a,function(e){var t=e.detail,n;try{(n=o.observerParse(t))&&Xt(o)}catch(e){var r=o.getDeliveryBuffer(),i;ae(e,a,r||t||{})}})}else if("gather"===e){var s=o.getGatherEvents(),c=o.getEventName(),u=function(e,t){var n;void 0===t&&(t=!1),o.gatherParse(e)&&Xt(o,t)},p=function(e){var t;try{if("pointerdown"===(t=o.gather(e)).eventType)Nt(t,u);else{var n=e.type===Y;u(t,n)}}catch(e){var r=o.getDeliveryBuffer(),i;ae(e,c,r||t||{})}o.shouldFireOnce()&&s.forEach(function(e){window.removeEventListener(e,p)})};s.forEach(function(e){-1<X.indexOf(e)&&Wt()?p({type:e}):window.addEventListener(e,p)})}}),"PerformanceObserver"in window&&(d=function(e){var t=e.entryType;return-1<f.indexOf(t)},l=function(e){var t;return"navigation"===e.entryType},(p=function(e){e.forEach(function(e){var t=new CustomEvent(qt(e.entryType),{detail:e.toJSON()});window.dispatchEvent(t)})})(performance.getEntries().filter(function(e){return d(e)&&!l(e)||Wt()&&l(e)})),m=new window.PerformanceObserver(function(e){p(e.getEntries())}),0<f.length))try{m.observe({entryTypes:f})}catch(e){}return fe(v),[2]}})})}function Zt(e,t){"function"==typeof window.dispatchEvent&&"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Kt(e,t){try{if(!en())return;var n="rum-start-"+e;window.performance.mark(n),"object"==typeof t&&null!==t&&"detail"in t&&jt.addDetail(n,t.detail)}catch(e){me(v,"RUMError[mark]: "+e)}}function $t(e,t){try{if(!en()||!Qt())return;var n="object"==typeof t&&null!==t,r=n&&"string"==typeof t.end,i="rum-start-"+(n&&"string"==typeof t.start?t.start:e),o=r?"rum-start-"+t.end:"rum-end-"+e,a="rum-"+e;r||window.performance.mark(o);try{window.performance.measure(a,i,o)}catch(e){if(!(e instanceof DOMException))throw e;window.performance.measure(a,"navigationStart",o)}jt.addMeasure(a,i,o),void 0!==t&&"detail"in t&&jt.addDetail(a,t.detail);var s=window.performance.getEntriesByName(a),c=s[s.length-1];return Zt(F,c),c}catch(e){me(v,"RUMError[measure]: "+e)}}function Qt(){return"performance"in window&&"getEntries"in window.performance&&"getEntriesByType"in window.performance&&"getEntriesByName"in window.performance}function en(){return"mark"in window.performance&&"measure"in window.performance}function tn(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(n,!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var rn=window.Static&&window.Static.SQUARESPACE_CONTEXT;function on(){return{templateId:rn.templateId||""}}function an(){var e=rn.website,t=void 0===e?{}:e;return{authenticUrl:t.authenticUrl||"",cloneable:t.cloneable||!1,developerMode:t.developerMode||!1,isHstsEnabled:t.isHstsEnabled||!1,language:t.language||"",timeZone:t.timeZone||"",websiteId:t.id||"",websiteType:t.websiteType||-1}}function sn(){var e=rn.websiteSettings,t;return{ampEnabled:(void 0===e?{}:e).ampEnabled||!1}}function cn(){var e=rn.collection,t;return{collectionType:(void 0===e?{}:e).type||-1}}function un(){if(rn&&window.blockedAssets&&window.blockedAssets.length){var e=rn.impersonatedSession,t=void 0!==e&&e,n=rn.pageType;Jt({appName:"v7-user-sites",context:nn({impersonatedSession:t,pageType:"number"==typeof n?n:-1},on(),{},an(),{},sn(),{},cn())})}}window.__DEV__||un()}},i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return i.d(e,"a",e),e},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=950);function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r});